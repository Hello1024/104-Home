<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="heatingstyle.css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link rel="manifest" href="manifest.json">
		<link href="https://fonts.googleapis.com/css2?family=Akronim&family=Creepster&family=Frijole&family=Henny+Penny&family=Nosifer&display=swap" rel="stylesheet">
	</head>
	<body>
		<canvas id="canvas" width=150>
			
		</canvas>
		
		<div id=infront>
			<button class="hotter centered">Hotter Plz</button>
			<h1 class="nownumber"><div id='now'>&#x1F937;</div></h1> 
			<p class="nextnumber">Going to:<div id='target'>&#x1F937;</div></p>
			<button class="colder centered">Colder Plz</button>
		</div>
		
		<script src=heatingmovement.js></script>
		<script>
			async function updateTemp() {
			  var res = await fetch('https://cors-anywhere.herokuapp.com/http://104.omattos.com:19891/temp');
                          var json = await res.json();
			  document.querySelector("#now").innerText = json.hallTemperature;
			  document.querySelector("#target").innerText = json.targetHallTemperature;
			  if (json.isHeatingNow)
			    document.querySelector('canvas').style.backgroundImage = 'linear-gradient(bottom, rgb(212,173,105) 0%, rgb(145,82,23) 84%);';
			  else
			    document.querySelector('canvas').style.backgroundImage = 'linear-gradient(bottom, rgb(105,173,212) 0%, rgb(23,82,145) 84%);';
			  
			}
			
			updateTemp();
			
			async function hotter() {
				await fetch('https://cors-anywhere.herokuapp.com/http://104.omattos.com:19891/hotter');
				updateTemp();
			}
			
			async function colder() {
				await fetch('https://cors-anywhere.herokuapp.com/http://104.omattos.com:19891/colder');
				updateTemp();
			}
			document.querySelector("button.colder").addEventListener('click', colder);
			document.querySelector("button.hotter").addEventListener('click', hotter);
		</script>
	</body>
</html>
